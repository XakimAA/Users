(this.webpackJsonpusers=this.webpackJsonpusers||[]).push([[0],{189:function(e,t){},202:function(e,t,a){e.exports=a(448)},207:function(e,t,a){},208:function(e,t,a){},228:function(e,t){},234:function(e,t){},445:function(e,t,a){},448:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(5),c=a.n(l),o=(a(207),a(208),a(68)),s=a(40),i=a(18),u=a(33),m=a(14),d=a(477),f=a(481),g=a(482),b=a(485),E=a(483),p=a(30),_=a(69),h=a.n(_),x=a(89),v=a(39),O=a(88),j=a.n(O);j.a.defaults.baseURL="https://livedemo.xsolla.com/fe/test-task/baev";var y=j.a,w=function(){function e(){Object(x.a)(this,e)}return Object(v.a)(e,[{key:"getUsers",value:function(e,t){var a=(e-1)*t;return y.get("".concat(y.defaults.baseURL,"/users?offset=").concat(a,"&limit=").concat(t))}},{key:"addUser",value:function(e){return y.post("".concat(y.defaults.baseURL,"/users"),e)}},{key:"getUserInfo",value:function(e){return y.get("".concat(y.defaults.baseURL,"/users/").concat(e))}},{key:"updateUser",value:function(e){return y.put("".concat(y.defaults.baseURL,"/users/").concat(e.user_id),e)}},{key:"getTransactions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1970-12-28T15%3A00%3A00Z",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2020-12-28T15%3A10%3A00Z";return y.get("".concat(y.defaults.baseURL,"/users/").concat(e,"/transactions?datetime_from=").concat(t,"&datetime_to=").concat(a))}},{key:"addTransaction",value:function(e){return y.post("".concat(y.defaults.baseURL,"/users/").concat(e.user_id,"/recharge"),e)}}]),e}(),C=new w,k=[{id:"date",name:"\u0434\u0430\u0442\u0430",fieldGetter:"date"},{id:"transaction_type",name:"\u0442\u0438\u043f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438",fieldGetter:"transaction_type"},{id:"amount",name:"\u0441\u0443\u043c\u043c\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",fieldGetter:"amount"},{id:"user_balance",name:"\u0431\u0430\u043b\u0430\u043d\u0441",fieldGetter:"user_balance"},{id:"currency",name:"\u0432\u0430\u043b\u044e\u0442\u0430",fieldGetter:"currency"},{id:"comment",name:"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",fieldGetter:"comment"},{id:"status",name:"\u0441\u0442\u0430\u0442\u0443\u0441",fieldGetter:"status"}],S=function(e){var t=Object(s.m)().id,a=Object(n.useState)({user_id:"",user_name:"",user_custom:"",email:"",register_date:"",balance:"",wallet_amount:"",wallet_currency:"",enabled:!0}),l=Object(m.a)(a,2),c=l[0],o=l[1],_=Object(n.useState)({user_id:t,amount:"",comment:""}),x=Object(m.a)(_,2),v=x[0],O=x[1],j=Object(n.useState)({user_id:!1,user_name:!1,user_custom:!1,email:!1}),y=Object(m.a)(j,2),w=y[0],S=y[1],W=Object(n.useState)(!1),U=Object(m.a)(W,2),B=U[0],L=U[1],T=Object(n.useState)(!0),I=Object(m.a)(T,2),G=I[0],N=I[1],R=Object(n.useState)(!0),D=Object(m.a)(R,2),M=D[0],Y=D[1],A=Object(n.useState)([]),K=Object(m.a)(A,2),P=K[0],J=K[1],Z=Object(n.useState)(!1),z=Object(m.a)(Z,2),F=z[0],$=z[1],q=Object(n.useState)(""),H=Object(m.a)(q,2),Q=H[0],V=H[1];Object(n.useEffect)((function(){var e=C.getUserInfo(t).then((function(e){return o(e.data),e})),a=C.getTransactions(t).then((function(e){var t=e.data;return J(t),t}));Promise.all([e,a]).then((function(e){Y(404===e[0].data.http_status_code),N(!1)}))}),[]);var X=function(e){return function(t){o(Object(u.a)({},c,Object(i.a)({},e,t.target.value))),S(Object(u.a)({},w,Object(i.a)({},e,!1)))}},ee=function(e){return function(t){O(Object(u.a)({},v,Object(i.a)({},e,t.target.value)))}};return r.a.createElement("div",{style:{padding:"20px"}},G&&r.a.createElement(p.Loader,{color:"blue",fullscreen:!0,centered:!0}),!G&&M&&r.a.createElement("div",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 \u0442\u0430\u043a\u0438\u043c id \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"),!G&&!M&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{style:{padding:"20px",marginBottom:"20px"}},r.a.createElement(f.a,{component:"p",align:"left",style:{marginBottom:"20px"}},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435"),r.a.createElement(g.a,{container:!0,spacing:2},r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"user_id",label:"ID",variant:"outlined",error:w.user_id,onChange:X("user_id"),value:c.user_id,disabled:!0}))),r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"user_name",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",variant:"outlined",error:w.user_name,onChange:X("user_name"),value:c.user_name}))),r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"user_custom",label:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f",variant:"outlined",error:w.user_custom,onChange:X("user_custom"),value:c.user_custom}))),r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"email",label:"E-mail",variant:"outlined",error:w.email,onChange:X("email"),value:c.email}))),r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"register_date",label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",variant:"outlined",value:h()(c.register_date).format("DD.MM.YYYY"),disabled:!0}))),r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"balance",label:"\u0411\u0430\u043b\u0430\u043d\u0441",variant:"outlined",value:c.balance,disabled:!0}))),r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"wallet_amount",label:"\u041a\u043e\u0448\u0435\u043b\u0435\u043a",variant:"outlined",value:c.wallet_amount,disabled:!0}))),r.a.createElement(g.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"wallet_currency",label:"\u0412\u0430\u043b\u044e\u0442\u0430",variant:"outlined",value:c.wallet_currency,disabled:!0}))),r.a.createElement(g.a,{item:!0,xs:12,md:10},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(f.a,{component:"p",align:"left",style:{color:"#ff0000"}},Q))),r.a.createElement(g.a,{item:!0,xs:12,md:2,align:"right"},r.a.createElement(p.Button,{type:"submit",appearance:"secondary",onClick:function(e){V(""),L(!0),C.updateUser(c).then((function(e){if(L(!1),"OK"===e.statusText&&200===e.status){var t="";e.data&&e.data.extended_message&&e.data.extended_message.global_errors&&e.data.extended_message.global_errors.length>0&&(t=e.data.extended_message.global_errors.reduce((function(e,t){return e+" "+t}),0)),e.data&&e.data.extended_message&&e.data.extended_message.property_errors&&(t+="\u041d\u0435\u0432\u0435\u0440\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043f\u043e\u043b\u0435:"+Object.keys(e.data.extended_message.property_errors).reduce((function(e,t){return S(Object(u.a)({},w,Object(i.a)({},t,!0))),e+" "+t+"\n"}),"")),""===t?console.log("\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"):(V(t),console.log("\u043e\u0448\u0438\u0431\u043a\u0430",t))}else console.log("\u043e\u0448\u0438\u0431\u043a\u0430",e)})).catch((function(e){L(!1),console.log("\u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",e)}))},fetching:B},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")))),r.a.createElement(d.a,{style:{padding:"20px",marginBottom:"20px"}},r.a.createElement(p.Collapse,{isOpened:!1,staticElements:1,collapsedLabel:function(){return"\u0412\u0432\u0435\u0441\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435"},expandedLabel:function(){return"\u0421\u043f\u0440\u044f\u0442\u0430\u0442\u044c"}},r.a.createElement(f.a,{component:"p",align:"left",style:{marginBottom:"20px"}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e"),r.a.createElement(g.a,{container:!0,spacing:2},r.a.createElement(g.a,{item:!0,xs:12,md:5},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"amount",label:"\u0421\u0443\u043c\u043c\u0430",variant:"outlined",onChange:ee("amount"),value:v.amount,type:"number"}))),r.a.createElement(g.a,{item:!0,xs:12,md:5},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"comment",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",variant:"outlined",onChange:ee("comment"),value:v.comment}))),r.a.createElement(g.a,{item:!0,xs:12,md:2,align:"right"},r.a.createElement(p.Button,{type:"submit",appearance:"secondary",onClick:function(e){$(!0),C.addTransaction(v).then((function(e){$(!1),e.data&&!e.data.message&&"OK"===e.statusText&&200===e.status?(console.log("\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"),C.getTransactions(t).then((function(e){var t=e.data;J(t)}))):console.log("\u043e\u0448\u0438\u0431\u043a\u0430",e)})).catch((function(e){$(!1),console.log("\u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",e)}))},fetching:F,style:{height:"100%"}},"+"))))),r.a.createElement(d.a,{style:{marginBottom:"20px"}},r.a.createElement(f.a,{component:"p",align:"left",style:{padding:"20px"}},"\u0412\u0441\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement(p.Table,{columns:k,rows:P,compact:!0,className:"table-wrapper",tableClassName:"user-table",renderEmptyMessage:function(){return r.a.createElement("div",null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445")},renderRow:function(e){return e.row.date=h()(e.row.date).format("DD.MM.YYYY"),r.a.createElement("tr",{className:e.className,key:e.row.operation_id},e.columns.map((function(t,a){return r.a.createElement(e.CellComponent,{key:a,column:t,row:e.row,rowIndex:e.rowIndex,columnIndex:a})})))}}))))},W=a(197),U=a.n(W),B=(a(445),new w),L=[{id:"user_id",name:"ID",fieldGetter:"user_id"},{id:"user_name",name:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",fieldGetter:"user_name"},{id:"user_custom",name:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f",fieldGetter:"user_custom"},{id:"email",name:"E-mail",fieldGetter:"email"}],T=function(e){var t=Object(s.k)(),a=Object(n.useState)([]),l=Object(m.a)(a,2),c=l[0],o=l[1],_=Object(n.useState)(0),h=Object(m.a)(_,2),x=h[0],v=h[1],O=Object(n.useState)(1),j=Object(m.a)(O,2),y=j[0],w=j[1],C=Object(n.useState)(10),k=Object(m.a)(C,2),S=k[0],W=(k[1],Object(n.useState)({})),T=Object(m.a)(W,2),I=T[0],G=T[1],N=Object(n.useState)(!1),R=Object(m.a)(N,2),D=R[0],M=R[1],Y=Object(n.useState)(""),A=Object(m.a)(Y,2),K=A[0],P=A[1],J=Object(n.useState)({user_id:!1,user_name:!1,user_custom:!1,email:!1}),Z=Object(m.a)(J,2),z=Z[0],F=Z[1];Object(n.useEffect)((function(){B.getUsers(y,S).then((function(e){return console.log("getUsers",e.data.data),o(e.data.data),v(e.data.recordsTotal),function(){}}))}),[y]);var $=function(e){return function(t){G(Object(u.a)({},I,Object(i.a)({},e,t.target.value))),F(Object(u.a)({},z,Object(i.a)({},e,!1)))}},q=function(e){console.log(e),t.push("/usercard/".concat(e))};return r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(d.a,{style:{padding:"20px",marginBottom:"20px"}},r.a.createElement(p.Collapse,{isOpened:!1,staticElements:1,collapsedLabel:function(){return"\u0412\u0432\u0435\u0441\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435"},expandedLabel:function(){return"\u0421\u043f\u0440\u044f\u0442\u0430\u0442\u044c"}},r.a.createElement(f.a,{component:"p",align:"left",style:{marginBottom:"20px"}},"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement(g.a,{container:!0,spacing:2},r.a.createElement(g.a,{item:!0,xs:12,md:2},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"user_id",label:"ID",variant:"outlined",error:z.user_id,onChange:$("user_id")}))),r.a.createElement(g.a,{item:!0,xs:12,md:3},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"user_name",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",variant:"outlined",error:z.user_name,onChange:$("user_name")}))),r.a.createElement(g.a,{item:!0,xs:12,md:3},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"user_custom",label:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f",variant:"outlined",error:z.user_custom,onChange:$("user_custom")}))),r.a.createElement(g.a,{item:!0,xs:12,md:2},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(E.a,{id:"email",label:"E-mail",variant:"outlined",error:z.email,onChange:$("email")}))),K&&r.a.createElement(g.a,{item:!0,xs:12,md:10},r.a.createElement(b.a,{fullWidth:!0},r.a.createElement(f.a,{component:"p",align:"left",style:{color:"#ff0000"}},K))),r.a.createElement(g.a,{item:!0,xs:12,md:2,align:"right"},r.a.createElement(p.Button,{type:"submit",appearance:"secondary",onClick:function(e){P(""),M(!0),B.addUser(I).then((function(e){if("OK"===e.statusText&&200===e.status){var t="";e.data&&e.data.extended_message&&e.data.extended_message.global_errors&&e.data.extended_message.global_errors.length>0&&(t=e.data.extended_message.global_errors.reduce((function(e,t){return e+" "+t+"\n"}),0)),e.data&&e.data.extended_message&&e.data.extended_message.property_errors&&(t+="\u041e\u0448\u0438\u0431\u043a\u0430:"+Object.keys(e.data.extended_message.property_errors).reduce((function(e,t){return F(Object(u.a)({},z,Object(i.a)({},t,!0))),console.log(t),e+" "+t+"\n"}),"")),e.data&&e.data.message&&(t+=e.data.message),""===t?(w(Math.floor((x+1)/S)+1),console.log("\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):(P(t),console.log("\u043e\u0448\u0438\u0431\u043a\u0430",t))}else console.log("\u043e\u0448\u0438\u0431\u043a\u0430",e);M(!1)})).catch((function(){M(!1)}))},style:{height:"100%"},fetching:D},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))),r.a.createElement(d.a,null,r.a.createElement(f.a,{component:"p",align:"left",style:{padding:"20px"}},"\u0412\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),r.a.createElement(g.a,{container:!0},r.a.createElement(g.a,{item:!0,xs:12,style:{marginBottom:"10px",paddingLeft:"20px"}},r.a.createElement(U.a,{current:y,total:x,perPage:S,onChangePage:w,className:"pagin",size:"sm"}))),r.a.createElement(p.Table,{columns:L,rows:c,compact:!0,className:"table-wrapper",tableClassName:"user-table",renderEmptyMessage:function(){return r.a.createElement("div",null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445")},renderRow:function(e){return r.a.createElement("tr",{className:e.className,key:e.row.user_id,onDoubleClick:q.bind(null,e.row.user_id)},e.columns.map((function(t,a){return r.a.createElement(e.CellComponent,{key:a,column:t,row:e.row,rowIndex:e.rowIndex,columnIndex:a})})))}})))};var I=function(){return r.a.createElement(o.BrowserRouter,null,r.a.createElement("div",{className:"App"},r.a.createElement(s.g,null,r.a.createElement(s.d,{path:"/usercard/:id"},r.a.createElement(S,null)),r.a.createElement(s.d,{path:"/"},r.a.createElement(T,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[202,1,2]]]);
//# sourceMappingURL=main.7311aca0.chunk.js.map